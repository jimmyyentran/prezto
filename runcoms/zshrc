#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

SH=$(basename $SHELL)
OS=$(uname)

if type nvim >/dev/null 2>&1; then
    export EDITOR='nvim'
    export VISUAL='nvim'
elif type vim >/dev/null 2>&1; then
    export EDITOR='vim'
    export VISUAL='vim'
else
    export EDITOR='vi'
    export VISUAL='vi'
fi

#######
# ZSH #
#######
if [[ $SH == 'zsh' ]]; then
    # Source Prezto.
    if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
        source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
    fi

    # Emacs
    # bindkey -e

    # Vim
    bindkey -v

    bindkey '^P' up-line-or-search
    bindkey '^N' down-line-or-search
    bindkey '^A' beginning-of-line
    bindkey '^E' end-of-line
    bindkey '^?' backward-delete-char
    bindkey '^h' backward-delete-char
    bindkey '^w' backward-kill-word
    bindkey '^r' history-incremental-search-backward

    export KEYTIMEOUT=1

    alias szsh="source ~/.zshrc" # source zsh
    alias zrc='~/.dotfiles/zsh/'
    alias zr='$EDITOR ~/.zshrc'
fi

###########
# MAC OSX #
###########
if [[ $OS == 'Darwin' ]]; then
    alias showFiles='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'
    alias hideFiles='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'
fi

# The next line updates PATH for the Google Cloud SDK.
if [ -f '/Users/jimmytran/Downloads/google-cloud-sdk/path.zsh.inc' ]; then source '/Users/jimmytran/Downloads/google-cloud-sdk/path.zsh.inc'; fi

# The next line enables shell command completion for gcloud.
if [ -f '/Users/jimmytran/Downloads/google-cloud-sdk/completion.zsh.inc' ]; then source '/Users/jimmytran/Downloads/google-cloud-sdk/completion.zsh.inc'; fi

#########
# Linux #
#########
if [[ $OS == 'Linux' ]]; then
    alias open='gnome-open'
fi

if type colordiff >/dev/null 2>&1; then
    alias diff='colordiff'
fi

# Virtualenv
if [[ -a /usr/local/bin/virtualenvwrapper.sh ]]; then
    source /usr/local/bin/virtualenvwrapper.sh
fi
if [[ -a ~/.local/bin/virtualenvwrapper.sh ]]; then
    source ~/.local/bin/virtualenvwrapper.sh
fi


#Hierarchy Viewer Variable (Android Studios)
export ANDROID_HVPROTO=ddm
export NODE_PATH=/usr/local/lib/node_modules/
#executable scripts
export set PATH=$PATH:~/Workspace/scripts
#set font for octave-gui
export FONTCONFIG_PATH=/opt/X11/lib/X11/fontconfig
#remove -S flag from zprofile default
export LESS='-F -g -i -M -R -w -X -z-4'
# tabtab source for yo package
# uninstall by removing these lines or running `tabtab uninstall yo`
[[ -f /usr/local/lib/node_modules/yo/node_modules/tabtab/.completions/yo.zsh ]] && . /usr/local/lib/node_modules/yo/node_modules/tabtab/.completions/yo.zsh



# Apply these aliases after source init.zsh
alias v='$EDITOR'
alias vr='$EDITOR ~/.vimrc'
alias lt='ls -lAhtr'
alias lz='ls -lAS'
alias q="exit"
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias doc="cd ~/Documents"
alias ws='cd ~/Workspace'
alias make='nocorrect make' #stop make from autocorrecting things
alias gaa='git add -A'
alias ga='git add'
alias gs='git status'
alias gd='git diff'
alias gpull='git pull'
alias gac='git commit -am'
alias pg='ps aux | grep'
alias py=python2
alias ipy=ipython2
alias pipi='pip install'
alias pips='pip show'
alias pipl='pip list'
alias pipu='pip install --upgrade'
alias pipun='pip uninstall'
alias tc='$EDITOR ~/.tmux.conf'

########
# CUDA #
########
if [ -d "/usr/local/cuda" ]; then
    export CUDA_HOME=/usr/local/cuda
    export CUDA_ROOT=$CUDA_HOME
    export PATH=$PATH:$CUDA_ROOT/bin
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$CUDA_ROOT/lib64:$CUDA_ROOT/extras/CUPTI/lib64
fi

